BioMedical Engineering and Informatics(CISP-BMEI 2016) Research of Location Fingerprint Based on Three-
Dimensional Indoor Positioning System 
Shan Liu, Jianping Chai 
School of Information Engineering, Communication University of China 
Beijing, China 
Abstract¡XThis paper proposed a solution to the three-
dimensional indoor positioning system based on location 
fingerprint method. Especially, it proposed an automatic offline 
collection method and realizes an off-line collection system, 
including a collection server and a mobile collection application, 
which can be used to collection the information of location 
fingerprint conveniently, and also improve the efficiency of the off 
line collection. Moreover, this paper studied the three-dimensional 
positioning system based on the location fingerprint method, 
which can obtain the indoor location information with a relative 
high accuracy. In addition, the paper improves the algorithm 
based on the location fingerprint, which improves the positioning 
accuracy and optimizes the positioning performance. 
Keywords¡Xindoor positioning; location fingerprint; three-
dimensional; NNSS-AVG; RSS 
I. INTRODUCTION 
With the development of wireless network and mobile 
technology, people tent to use location based service to get 
access on location information. Location information service has 
been brought into many fields such as big data, cloud computing, 
Internet of things, O2O and other new technologies and new 
applications [1-3]. 
WLAN positioning technology includes Received Signal 
Strength (RSS) [4,5], Angle of Arrival (AOA) [6,7] and Time of 
Arrival (TOA) [8,9]. The special hardware equipment is 
required in AOA and TOA positioning technology, which is 
used for precise measurement and synchronization of angle and 
time. Compared with AOA and TOA, the RSS does not require 
additional special equipment and has the following advantages: 
(1) Fully based on the existing network infrastructure and 
mobile terminals, no additional equipment is required; 
(2) High positioning accuracy within several meters; 
(3) The positioning delay is very small, and does not need to 
search the satellite at the first time. 
The RSS still can be divided into two kinds of positioning 
technologies: location fingerprint method and communication 
model method [10-12]. These two methods are different in the 
way that the RSS value of the wireless signal combined with the 
position information. Because the accuracy of the 
communication model method is lower and the adaptability to 
the environment is poorer, the location fingerprint method in the 
indoor positioning technology is generally preferred. The 
positioning technology based on location fingerprint can provide 
less delay of indoor positioning and higher precision. 
However, the location fingerprint technology is not mature, 
and there is no large-scale commercial use in the market. The 
most important reason is that the location fingerprint technology 
is required to collect the location fingerprint information, and the 
work is time-consuming compare with the benefit. Furthermore, 
the two-dimensional spatial positioning cannot meet the needs 
of location services in many cases and the height of the object 
and the personnel information is becoming more important. For 
example, in the event of a fire alarm and other disasters, we need 
to determine the height, which will impact the rescue effect. 
In addition, LBS have been widely used in some areas such 
as public security and cultural exhibition. In an exhibition or a 
shopping mall, the display may also be placed in different 
heights. Although the height information is so important, there 
is still no one successfully to carry on the three-dimensional 
space positioning research using location fingerprint 
technology, which is because the three-dimensional space of the 
offline fingerprint collection is more than two-dimensional 
space. 
In this paper, we present a new type of deterministic 
algorithm named NNSS-AP-AVG based on the NNSS-AVG 
algorithm, which has better performance on the indoor 
positioning technology based on the location fingerprint method, 
especially for three-dimensions. 
II. SYSTEM ARCHITECTURE 
The principle of location fingerprint method is that the 
characteristics of the RSS signal received in different physical 
locations are unique and distinguishable. According to this 
feature, we can construct a database, which is used to map the 
physical location to the received RSS signal characteristics. 
When we know the characteristics of the received RSS signal, 
we can also get the physical location of the RSS signal. 
Indoor positioning based on location fingerprint consists of 
two stages: offline collection stage and online positioning stage. 
The main purpose of the offline collection stage is to build the 
location fingerprint database and the main purpose of online 
positioning stage is to estimate the location of the target in the 
test environment. 
The database of fingerprint locations will be set up in the 
offline acquisition phase, which relating the position 
information and the RSS vectors. The RSS vector consists of 
Research of Location Fingerprint Based on Three-
Dimensional Indoor Positioning System 
Shan Liu, Jianping Chai 
School of Information Engineering, Communication University of China 
Beijing, China 
Abstract¡XThis paper proposed a solution to the three-
dimensional indoor positioning system based on location 
fingerprint method. Especially, it proposed an automatic offline 
collection method and realizes an off-line collection system, 
including a collection server and a mobile collection application, 
which can be used to collection the information of location 
fingerprint conveniently, and also improve the efficiency of the off 
line collection. Moreover, this paper studied the three-dimensional 
positioning system based on the location fingerprint method, 
which can obtain the indoor location information with a relative 
high accuracy. In addition, the paper improves the algorithm 
based on the location fingerprint, which improves the positioning 
accuracy and optimizes the positioning performance. 
Keywords¡Xindoor positioning; location fingerprint; three-
dimensional; NNSS-AVG; RSS 
I. INTRODUCTION 
With the development of wireless network and mobile 
technology, people tent to use location based service to get 
access on location information. Location information service has 
been brought into many fields such as big data, cloud computing, 
Internet of things, O2O and other new technologies and new 
applications [1-3]. 
WLAN positioning technology includes Received Signal 
Strength (RSS) [4,5], Angle of Arrival (AOA) [6,7] and Time of 
Arrival (TOA) [8,9]. The special hardware equipment is 
required in AOA and TOA positioning technology, which is 
used for precise measurement and synchronization of angle and 
time. Compared with AOA and TOA, the RSS does not require 
additional special equipment and has the following advantages: 
(1) Fully based on the existing network infrastructure and 
mobile terminals, no additional equipment is required; 
(2) High positioning accuracy within several meters; 
(3) The positioning delay is very small, and does not need to 
search the satellite at the first time. 
The RSS still can be divided into two kinds of positioning 
technologies: location fingerprint method and communication 
model method [10-12]. These two methods are different in the 
way that the RSS value of the wireless signal combined with the 
position information. Because the accuracy of the 
communication model method is lower and the adaptability to 
the environment is poorer, the location fingerprint method in the 
indoor positioning technology is generally preferred. The 
positioning technology based on location fingerprint can provide 
less delay of indoor positioning and higher precision. 
However, the location fingerprint technology is not mature, 
and there is no large-scale commercial use in the market. The 
most important reason is that the location fingerprint technology 
is required to collect the location fingerprint information, and the 
work is time-consuming compare with the benefit. Furthermore, 
the two-dimensional spatial positioning cannot meet the needs 
of location services in many cases and the height of the object 
and the personnel information is becoming more important. For 
example, in the event of a fire alarm and other disasters, we need 
to determine the height, which will impact the rescue effect. 
In addition, LBS have been widely used in some areas such 
as public security and cultural exhibition. In an exhibition or a 
shopping mall, the display may also be placed in different 
heights. Although the height information is so important, there 
is still no one successfully to carry on the three-dimensional 
space positioning research using location fingerprint 
technology, which is because the three-dimensional space of the 
offline fingerprint collection is more than two-dimensional 
space. 
In this paper, we present a new type of deterministic 
algorithm named NNSS-AP-AVG based on the NNSS-AVG 
algorithm, which has better performance on the indoor 
positioning technology based on the location fingerprint method, 
especially for three-dimensions. 
II. SYSTEM ARCHITECTURE 
The principle of location fingerprint method is that the 
characteristics of the RSS signal received in different physical 
locations are unique and distinguishable. According to this 
feature, we can construct a database, which is used to map the 
physical location to the received RSS signal characteristics. 
When we know the characteristics of the received RSS signal, 
we can also get the physical location of the RSS signal. 
Indoor positioning based on location fingerprint consists of 
two stages: offline collection stage and online positioning stage. 
The main purpose of the offline collection stage is to build the 
location fingerprint database and the main purpose of online 
positioning stage is to estimate the location of the target in the 
test environment. 
The database of fingerprint locations will be set up in the 
offline acquisition phase, which relating the position 
information and the RSS vectors. The RSS vector consists of 

 1124 
Figure 1. The diagram of fingerprint positioning workflow 
signal intensity received by all Aps, which we call it the location 
fingerprint. In the offline acquisition phase, the user first selects 
a number of reference points in the environment to be tested, 
and then recorded the entire wireless signal intensities of 
reference points received by Aps. When all the positions of the 
fingerprints stored in the database, the construction of the 
location fingerprint database is completed. 
The location will be estimated in the online positioning stage, 
where the user estimated the position using the signal intensity 
received from each APs. The location fingerprint algorithm is 
calculated to estimate the position to be measured. The position 
can be measured both in the three-dimensional space and two-
dimensional space. In this paper, the position of the location 
fingerprint means the space coordinates. The diagram of 
fingerprint positioning workflow is shown as Fig.1. 
A. NNSS 
The Nearest Neighbor(s) in Signal Space (NNSS) is the most 
classical deterministic positioning algorithm, which is proposed 
by RADAR system. 
The location fingerprint positioning system is based on the 
NNSS algorithm, which will be calculated by the following 
Euclidean distance equation: 
d=..£U(.........).......... (1) 
Where the parameter F is location fingerprint data measured 
in the online position stage and parameter S is the location 
fingerprint data settled from the location fingerprint database in 
the offline acquisition phase. 
The location of the fingerprint data is determined as the 
minimum of the Euclidean distance. This paper presents an 
improved algorithm named NNSS Adjustable Parameter 
Average (NNSS-AVG) based on NNSS. 
B. NNSS-AVG 
The algorithm of NNSS-AVG, which is also designed by the 
developers of RADAR system, is applied to the RADAR-2 
system. The NNSS-AVG is calculated as the mean of the first 
kn minimum of the Euclidean distance, which determined from 
the location fingerprint data measured in the online position 
stage and location fingerprint data settled from the location 
fingerprint database in the offline acquisition phase. 
C. NNSS-AP-AVG 
The algorithm of NNSS-AP-AVG is improved from 
NNSS-AVG and can be implemented as the following steps: 
(1) Calculate and order the Euclidean distance of the location 
fingerprint data to be measured and the location fingerprint data 
in the database; 
(2) Select Q location fingerprint data that less than M times 
the minimum Euclidean distance; 
(3) Compared Q with kn of the initial input, and select the 
smaller one as P; 
(4) Calculated the weighted average of the P location 
fingerprint data with smaller Euclidean distance, where the 
weighted average parameters are the normalized Euclidean 
distance. 
There are two main improvements of NNSS-AP-AVG 
compared with NNSS-AVG: 
(1) The fixed kn is modified to a small number between kn 
and Q, which is called P, and the Q is the number of location 
Figure 1. The diagram of fingerprint positioning workflow 
signal intensity received by all Aps, which we call it the location 
fingerprint. In the offline acquisition phase, the user first selects 
a number of reference points in the environment to be tested, 
and then recorded the entire wireless signal intensities of 
reference points received by Aps. When all the positions of the 
fingerprints stored in the database, the construction of the 
location fingerprint database is completed. 
The location will be estimated in the online positioning stage, 
where the user estimated the position using the signal intensity 
received from each APs. The location fingerprint algorithm is 
calculated to estimate the position to be measured. The position 
can be measured both in the three-dimensional space and two-
dimensional space. In this paper, the position of the location 
fingerprint means the space coordinates. The diagram of 
fingerprint positioning workflow is shown as Fig.1. 
A. NNSS 
The Nearest Neighbor(s) in Signal Space (NNSS) is the most 
classical deterministic positioning algorithm, which is proposed 
by RADAR system. 
The location fingerprint positioning system is based on the 
NNSS algorithm, which will be calculated by the following 
Euclidean distance equation: 
d=..£U(.........).......... (1) 
Where the parameter F is location fingerprint data measured 
in the online position stage and parameter S is the location 
fingerprint data settled from the location fingerprint database in 
the offline acquisition phase. 
The location of the fingerprint data is determined as the 
minimum of the Euclidean distance. This paper presents an 
improved algorithm named NNSS Adjustable Parameter 
Average (NNSS-AVG) based on NNSS. 
B. NNSS-AVG 
The algorithm of NNSS-AVG, which is also designed by the 
developers of RADAR system, is applied to the RADAR-2 
system. The NNSS-AVG is calculated as the mean of the first 
kn minimum of the Euclidean distance, which determined from 
the location fingerprint data measured in the online position 
stage and location fingerprint data settled from the location 
fingerprint database in the offline acquisition phase. 
C. NNSS-AP-AVG 
The algorithm of NNSS-AP-AVG is improved from 
NNSS-AVG and can be implemented as the following steps: 
(1) Calculate and order the Euclidean distance of the location 
fingerprint data to be measured and the location fingerprint data 
in the database; 
(2) Select Q location fingerprint data that less than M times 
the minimum Euclidean distance; 
(3) Compared Q with kn of the initial input, and select the 
smaller one as P; 
(4) Calculated the weighted average of the P location 
fingerprint data with smaller Euclidean distance, where the 
weighted average parameters are the normalized Euclidean 
distance. 
There are two main improvements of NNSS-AP-AVG 
compared with NNSS-AVG: 
(1) The fixed kn is modified to a small number between kn 
and Q, which is called P, and the Q is the number of location 

 1125 
Figure 2. The layout of reference points in the 3D testing enviorment 
fingerprints where the Euclidean distance is less than M times 
the minimum Euclidean distance. 
(2) The estimate average is modified as a weighted average. 
The first point of the improvement is that we try to prevent 
the kn fixation caused by the non-similar locations to participate 
in the estimation, which is because if the number of the 
estimated locations is fixed, and if not enough number of the 
similar locations join in the calculation, there will result in a 
larger estimation error. Secondly, the purpose of the comparison 
between kn and Q is to prevent the Q value to become too large 
which will involve too much locations to participate in the 
estimate. If the Q value is too large, then the estimated location 
will not similar. Thus, we use the threshold of kn to limit the 
number of participants in the estimates. 
The second point of the improvement is that we try to 
increase the weight of the similar location fingerprints, that is, 
the estimated location is more close to the location of the 
fingerprint, which is more accurate. The weighted NNSS-AVG 
algorithm also uses this method. 
III. SYSTEM SOLUTION 
A. Clustering Analysis 
In the location fingerprint method, we need to search and 
compare for the location fingerprints data among the whole 
fingerprint database, which is a large and complex computation. 
In order to reduce the computation complexity, we introduce a 
clustering method in the location fingerprint method. 
Clustering analysis is a multivariate statistical method used 
in pattern recognition, machine learning, data mining, image 
processing, etc. Clustering analysis can be divided into 
hierarchical clustering and non-hierarchical clustering. For 
hierarchical clustering, the key is to define the class distance. 
For non-hierarchical clustering, which is referred to a kind of 
clustering methods, the common feature is to give an immature 
initial classification, and revise it repeatedly according to some 
certain rules until the classification become reasonable. 
Compared with hierarchical clustering, the non-hierarchical 
clustering method has better classification accuracy, and 
occupies less system resources. In this paper, we choose the 
classical K-means method in non-hierarchical clustering 
method. 
The clustering analysis steps are shown as follows: 
(1) Set km which is the number of clusters; 
(2) Random category the fingerprint data to be measured and 
the location fingerprint data in the database into km classes. 
(3) Calculate the center of gravity as a cluster center; 
(4) Calculate the distance between each location fingerprint 
data and the center of each cluster, and place the location 
fingerprint data into a class that is represented by the nearest 
cluster center. Recalculate the center of gravity as a new cluster 
center; 
(5) Repeat step (4) until the resulting classification is no 
longer changed. 
B. 3D NNSS-AP-AVG Positioning Algorithm 
In order to realize the 3D positioning system based on 
location fingerprint, we choose a three-dimensional space of 12 
meters long, 1.6 meters wide and 2 meters high as an experiment 
environment, as shown in Fig. 2. 
We choose the reference points in every 0.8 meters, which is 
highlightened in the color of blue. And the height of the 
reference points was selected as 0.4 meters, 1.2 meters, 2 meters, 
respectively. We use our own automatic acquisition application 
named CUCFC instead of inSSIDer to collect the location 
fingerprint data. We use CUCFC to collect 30 location 
fingerprint data at each reference point. We set up the position 
to be measured at each reference point of 1.2 meters high, and a 
total of 28 to be measured with the red color. We also have used 
Figure 2. The layout of reference points in the 3D testing enviorment 
fingerprints where the Euclidean distance is less than M times 
the minimum Euclidean distance. 
(2) The estimate average is modified as a weighted average. 
The first point of the improvement is that we try to prevent 
the kn fixation caused by the non-similar locations to participate 
in the estimation, which is because if the number of the 
estimated locations is fixed, and if not enough number of the 
similar locations join in the calculation, there will result in a 
larger estimation error. Secondly, the purpose of the comparison 
between kn and Q is to prevent the Q value to become too large 
which will involve too much locations to participate in the 
estimate. If the Q value is too large, then the estimated location 
will not similar. Thus, we use the threshold of kn to limit the 
number of participants in the estimates. 
The second point of the improvement is that we try to 
increase the weight of the similar location fingerprints, that is, 
the estimated location is more close to the location of the 
fingerprint, which is more accurate. The weighted NNSS-AVG 
algorithm also uses this method. 
III. SYSTEM SOLUTION 
A. Clustering Analysis 
In the location fingerprint method, we need to search and 
compare for the location fingerprints data among the whole 
fingerprint database, which is a large and complex computation. 
In order to reduce the computation complexity, we introduce a 
clustering method in the location fingerprint method. 
Clustering analysis is a multivariate statistical method used 
in pattern recognition, machine learning, data mining, image 
processing, etc. Clustering analysis can be divided into 
hierarchical clustering and non-hierarchical clustering. For 
hierarchical clustering, the key is to define the class distance. 
For non-hierarchical clustering, which is referred to a kind of 
clustering methods, the common feature is to give an immature 
initial classification, and revise it repeatedly according to some 
certain rules until the classification become reasonable. 
Compared with hierarchical clustering, the non-hierarchical 
clustering method has better classification accuracy, and 
occupies less system resources. In this paper, we choose the 
classical K-means method in non-hierarchical clustering 
method. 
The clustering analysis steps are shown as follows: 
(1) Set km which is the number of clusters; 
(2) Random category the fingerprint data to be measured and 
the location fingerprint data in the database into km classes. 
(3) Calculate the center of gravity as a cluster center; 
(4) Calculate the distance between each location fingerprint 
data and the center of each cluster, and place the location 
fingerprint data into a class that is represented by the nearest 
cluster center. Recalculate the center of gravity as a new cluster 
center; 
(5) Repeat step (4) until the resulting classification is no 
longer changed. 
B. 3D NNSS-AP-AVG Positioning Algorithm 
In order to realize the 3D positioning system based on 
location fingerprint, we choose a three-dimensional space of 12 
meters long, 1.6 meters wide and 2 meters high as an experiment 
environment, as shown in Fig. 2. 
We choose the reference points in every 0.8 meters, which is 
highlightened in the color of blue. And the height of the 
reference points was selected as 0.4 meters, 1.2 meters, 2 meters, 
respectively. We use our own automatic acquisition application 
named CUCFC instead of inSSIDer to collect the location 
fingerprint data. We use CUCFC to collect 30 location 
fingerprint data at each reference point. We set up the position 
to be measured at each reference point of 1.2 meters high, and a 
total of 28 to be measured with the red color. We also have used 

 1126 
CUCFC to collect the 30 position and record the position 
information. 
We use NNSS-AP-AVG to implement the MATLAB 
algorithm. By adjusting the parameters of kn and Q, the 3D 
positioning accuracy can be achieved by NNSS-AP-AVG 
algorithm. 
In detail, we calculate the Euclidean distance between the 
position of 28 points to be measured and the position of the 135 
reference points. Then we get the estimated position according 
to the NNSS-AP-AVG algorithm, and get the 3D coordinates. 
The Euclidean distance are calculated between the coordinates 
of 28 points to be measured and their real coordinates, then the 
estimation errors are calculated and the CDF and ARMSE are 
calculated. 
First, we do the simulation with different kn values when M 
value is fixed. When M value is fixed at 3.75, and the kn is take 
as 15, 30, 45, 90, 135, respectively, the results are shown in 
Fig.3. When kn equals to 45, as shown in the figure, the CDF 
reaches the highest value, which means the highest positioning 
accuracy. When kn equals to 90 or 135, the CDF is higher within 
a certain range of 0.5 meter. This is because when kn takes a 
larger value, according to the NNSS-AP-AVG algorithm, M 
value will take the main role, and will let all the position with 
similar conditions to involved in the estimation, which may 
result in a high accuracy in a certain range. But in a larger range 
of estimation, we need to determine the threshold of kn by 
simulation. In this paper, kn equals to 45 in the three-
dimensional experimental environment. 
Figure 3. The results of NNSS-AP-AVG algorithm with different kn 
Then we determine the threshold of kn equals to 45, and do 
the simulation with different M to test if the positioning 
accuracy changes. The M values are taken as 1, 1.5, 2.25, 3, 
3.75, 4.5, respectively, and the results are shown in Fig.4. When 
M equals to 3.75, the CDF reaches the highest value, which 
means the highest accuracy can be reached at of CDF equals to 
96.43% within 3 meters. In the case of M equals to 1, the NNSS-
AP-AVG algorithm becomes the NNSS algorithm, and the 
positioning accuracy is significantly lower than the NNSS-AP-
AVG algorithm. When M is less than 3.75, the CDF is increased 
when M value is increasing. This indicates that more positions 
involve in the estimation can improve the position accuracy 
when M value is less than 3.75. Therefore, in this paper, M 
value is taken as 3.75 in the three-dimensional space 
experiment environment. 
Figure 4. The results of NNSS-AP-AVG algorithm with different M 
In the research of NNSS-AP-AVG algorithm, we also do 
the simulation with clustering analysis. We still use the K-
means algorithm to replace the location fingerprint database of 
135 location fingerprint data with cluster. We take kn equals to 
45 and M equals to 3.75, respectively, the km is taken from 1 to 
6, and the simulation results are shown in Fig.5. When km 
equals to 1 with no clustering, the CDF reaches the highest, 
which means the positioning accuracy is the highest. When km 
does not equal to 1, the highest CDF can be obtained when km 
equals to 3, which means the highest positioning accuracy with 
clustering. 
Figure 5. The results of 3D positioning algorithm with different km 
0.511.522.533.5400.10.20.30.40.50.60.70.80.91Postioning error(m)
Cumulative error distribution 
kn=15kn=30kn=45kn=90kn=1350.511.522.533.5400.10.20.30.40.50.60.70.80.91Postioning error(m)
Cumulative error distribution 
M=1M=1.5M=2.25M=3M=3.75M=4.50.511.522.533.5400.10.20.30.40.50.60.70.80.91Postioning error(m)
Cumulative error distribution 
km=1km=2km=3km=4km=5km=6

 1127 
The simulation results show that the clustering analysis can 
improve the accuracy of the location fingerprint estimation, 
because the clustering analysis can reduce the calculation time 
of the Euclidean distance by replace the location fingerprint 
database with a cluster. Therefore, in the 3D experimental 
environment, we use NNSS-AP-AVG algorithm with 
clustering analysis. Its positioning accuracy is significant when 
CDF is 96.43% within 3 meters¡¦ range. 
IV. CONCLUSIONS 
This paper introduces a 3D indoor positioning system using 
location fingerprint method. Especially, in order to achieve the 
highest positioning accuracy, we use a novel-positioning 
algorithm named NNSS-AP-AVG based on NNSS-AVG 
(Nearest Neighbor(s) in Signal Space-Average) in the location 
fingerprint method. Moreover, in order to improve the 
positioning accuracy, we introduce the clustering analysis to 
reduce the calculation time of the Euclidean distance by replace 
the location fingerprint database with a cluster. In addition, to 
solve the hard work of offline phase, a fingerprint collecting 
system is implemented. The simulation results demonstrated 
that the 3D indoor positioning system can achieve higher 
positioning accuracy when we use NNSS-AP-AVG algorithm 
with clustering analysis. And its positioning accuracy can reach 
when CDF is 96.43% within 3 meters¡¦ range. 
REFERENCES 
[1] Schilit B N, Adams N I, Want R. Context-Aware Computing 
Applications[C].Mobile Computing Systems and Applications, Santa 
Cruz: IEEE, 1994: 85-90. 
[2] Reichenbacher T. Mobile Cartography-Adaptive Visualisation of 
Geographic Information on Mobile Devices[D]. Germany: TUM PhD 
Thesis, 2004: 36-42. 
[3] A.Goldsmith.Wireless communications[M].Cambridge University Press, 
2005. 
[4] Ji Y, Biaz S, Pandey S, et al. ARIADNE: a Dynamic Indoor Signal Map 
Construction and Localization System[C]. In Proceedings of the 4th 
International Conference on Mobile systems, Applications and Services, 
Uppsala, Sweden: 2006, 151 ¡V 164. 
[5] NI W, WANG Z-x.Indoor Location Algorithm Based on the Measurement 
of the Received Signal Strength[C]. Frontiers of Electrical and Electronic 
Engineering in China, 2006, 1(1), 48-52. 
[6] Chintalapudi K, Padmanabha Iyer A, Padmanabhan V N. Indoor 
localization without the pain[C].Proceedings of the sixteenth annual 
international conference on Mobile computing and networking. ACM, 
2010: 173-184. 
[7] Bahl P, Padmanabhan V N. RADAR: An in-building RF-based User 
Location and Tracking System[C]. IEEE Infocom 2000. Tel Aviv, 
2000:775-784. 
[8] Bahl P, Balachandran A, Padmanabhan V N. Enhancements to the 
RADAR User Location and Tracking System[R].Technical Report MSR-
TR-00-12, Microsoft Research. 2000. 
[9] Youssef M, Agrawala A, Shankar A U. WLAN Location Determination 
via Clustering and 
[10] Probability Distributions[C]. In:IEEE International Conference on 
Pervasive Computing and Communications(PerCom) 2003, Fort Worth, 
Texas, 2003 
[11] Youssef M, Agrawala A. The Horus WLAN location determination 
system[C]. Proceedings of the 3rd international conference on Mobile 
systems, applications, and services. ACM, 2005: 205-218. 
[12] A.Rai, K. K. Chintalapudi, V. N. Padmanabhan, et al.Zee: Zero-Effort 
Crowdsoucing for Indoor Localization[C]. Proceedings of ACM 
Mobicom,2012: 269-280. 
The simulation results show that the clustering analysis can 
improve the accuracy of the location fingerprint estimation, 
because the clustering analysis can reduce the calculation time 
of the Euclidean distance by replace the location fingerprint 
database with a cluster. Therefore, in the 3D experimental 
environment, we use NNSS-AP-AVG algorithm with 
clustering analysis. Its positioning accuracy is significant when 
CDF is 96.43% within 3 meters¡¦ range. 
IV. CONCLUSIONS 
This paper introduces a 3D indoor positioning system using 
location fingerprint method. Especially, in order to achieve the 
highest positioning accuracy, we use a novel-positioning 
algorithm named NNSS-AP-AVG based on NNSS-AVG 
(Nearest Neighbor(s) in Signal Space-Average) in the location 
fingerprint method. Moreover, in order to improve the 
positioning accuracy, we introduce the clustering analysis to 
reduce the calculation time of the Euclidean distance by replace 
the location fingerprint database with a cluster. In addition, to 
solve the hard work of offline phase, a fingerprint collecting 
system is implemented. The simulation results demonstrated 
that the 3D indoor positioning system can achieve higher 
positioning accuracy when we use NNSS-AP-AVG algorithm 
with clustering analysis. And its positioning accuracy can reach 
when CDF is 96.43% within 3 meters¡¦ range. 


